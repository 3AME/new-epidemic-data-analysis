<!DOCTYPE html>

<head>
    <meta charset="utf-8"/>
    <title>epidemic-data-analysis | World epidemic situation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet"
          type="text/css">
    <link href="assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css">
    <link href="assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css">
    <link href="assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME STYLES -->
    <link href="assets/global/css/components-rounded.css" id="style_components" rel="stylesheet" type="text/css"/>
    <link href="assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href="assets/admin/layout4/css/layout.css" rel="stylesheet" type="text/css"/>
    <link id="style_color" href="assets/admin/layout4/css/themes/light.css" rel="stylesheet" type="text/css"/>
    <link href="assets/admin/layout4/css/custom.css" rel="stylesheet" type="text/css"/>
    <!-- END THEME STYLES -->
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <script type="text/javascript" src="echart/js/world.js"></script>

</head>

<body class="page-header-fixed page-sidebar-closed-hide-logo">

<!-- BEGIN HEADER -->
<div style="margin-top: 10px;" class="page-header navbar navbar-fixed-top">
    <!-- BEGIN HEADER INNER -->
    <div class="page-header-inner">
        <!-- BEGIN LOGO -->
        <div class="page-logo">
            <a href="index.html" style="font-size: 18px;margin-top: 18px;">
                <img style="width: 8em;height: 3em;" src="assets/admin/layout4/icons/logo_1.2.png" alt="logo"
                     class="logo-default"/>
            </a>
            <div class="menu-toggler sidebar-toggler">
                <!-- DOC: Remove the above "hide" to enable the sidebar toggler button on header -->
            </div>
        </div>
        <!-- END LOGO -->
        <!-- BEGIN RESPONSIVE MENU TOGGLER -->
        <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse"
           data-target=".navbar-collapse">
        </a>
        <!-- END RESPONSIVE MENU TOGGLER -->
        <!-- BEGIN PAGE TOP -->
        <div class="page-top">
        </div>
        <!-- END TOP NAVIGATION MENU -->
    </div>
    <!-- END PAGE TOP -->
</div>
<!-- END HEADER INNER -->
</div>
<!-- END HEADER -->
<div class="clearfix">
</div>
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN SIDEBAR -->
    <div class="page-sidebar-wrapper">
        <div class="page-sidebar navbar-collapse collapse" style="color: black;margin-top: 50px;">
            <ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true"
                data-slide-speed="200">
                <li class="start ">
                    <a href="index.html">
                        <!-- <i class="icon-home"></i> -->
                        <img style="width: 20px;height: 20px;" src="assets/admin/layout4/icons/home.png"/>
                        <span class="title">Home</span>
                    </a>
                </li>
                <li>
                    <a href="world_epidemic_situation.html"><img style="width: 20px;height: 20px;"
                                                                 src="assets/admin/layout4/icons/world.png"/>
                        <span class="title">World epidemic situation</span> </a>
                    <!-- <a  href="world_epidemic_situation.html">
                        World epidemic situation</a> -->
                </li>
                <li>
                    <a href="CHINA.html">
                        <img style="width: 20px;height: 20px;" src="assets/admin/layout4/icons/中国地图.png"/>
                        <span class="title">China's epidemic situation </span>
                    </a>
                </li>
                <li>
                    <a href="US.html">
                        <img style="width: 20px;height: 20px;" src="assets/admin/layout4/icons/美国 (1).png"/>
                        <span class="title">U.S. epidemic situation</span></a>
                </li>
                <li>
                    <a href="Analysis_and_forecasting.html">
                        <img style="width: 20px;height: 20px;" src="assets/admin/layout4/icons/国家（pitch on）.png"/>
                        <span class="title">Analysis and forecasting</span> </a>
                </li>
                <li>
                    <a href="public_opinion_and_epidemic_situation.html">
                        <img style="width: 20px;height: 20px;" src="assets/admin/layout4/icons/virus.png"/>
                        <span class="title">Public opinion</span>
                    </a>
                </li>
                <li>
                    <a href="version.html">
                        <img style="width: 20px;height: 20px;" src="assets/admin/layout4/icons/历史.png"/>
                        <span class="title">Historic versions</span>
                    </a>
                </li>
                <li>
                    <a href="about_us.html">
                        <img style="width: 20px;height: 20px;" src="assets/admin/layout4/icons/about us.png"/>
                        <span class="title">About us</span>
                    </a>
                </li>
            </ul>
            <!-- END SIDEBAR MENU -->
        </div>
    </div>
    <!-- END SIDEBAR -->
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <div class="page-content">
            <!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
            <div class="modal fade" id="portlet-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
            </div>
            <!-- /.modal -->
            <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
            <!-- BEGIN PAGE HEADER-->
            <!-- BEGIN PAGE HEAD -->
            <div class="page-head">
                <!-- BEGIN PAGE TITLE -->
                <div class="page-title">
                    <h1>World epidemic situation<small> World epidemic situation</small></h1>
                </div>
                <!-- END PAGE TITLE -->
            </div>
            <!-- END PAGE HEAD -->
            <!-- BEGIN PAGE BREADCRUMB -->
            <!-- 添加链接，跳转，不是很有必要，因为已经有菜单了 -->
            <!-- <ul class="page-breadcrumb breadcrumb"> -->
            <!-- <li>
                <a href="index.html">Home</a>
                <i class="fa fa-circle"></i>
            </li> -->
            <!-- <li>
                <a href="#">Page Layouts</a>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <a href="#">Blank Page</a>
            </li> -->
            <!-- </ul> -->
            <!-- END PAGE BREADCRUMB -->
            <!-- END PAGE HEADER-->
            <!-- BEGIN PAGE CONTENT-->
            <div class="row">
                <div class="col-md-12">
                    <!-- Page content goes here -->
                    <!-- BEGIN WORLD PORTLET-->
                    <div class="portlet box grey-cascade">
                        <div class="portlet-body">
                            <div id="vmap_world" class="Charts" style="height: 50em;">
                                <div id="world_chart" style="width:100%;height:50em;margin: auto;"></div>
                                <!-- <div id="main" style="width:1200px;height:800px;"></div> -->
                            </div>
                            <!-- </div> -->
                        </div>
                    </div>
                </div>
                <!-- END WORLD PORTLET-->
                <div class="col-md-6">
                    <div class="portlet box grey-cascade">
                        <div class="portlet-body">
                            <div class="tabbable tabs-left">
                                <ul class="nav nav-tabs">
                                    <li class="active">
                                        <a href="#tab_6_1" data-toggle="tab">
                                            CURE_RATE </a>
                                    </li>
                                    <li>
                                        <a href="#tab_6_2" data-toggle="tab">
                                            MORTALITY_RATE </a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane active" id="tab_6_1">
                                        <div id="Cure_rate" style="width: 100%; height: 40em"></div>
                                    </div>
                                    <div class="tab-pane fade" id="tab_6_2">
                                        <div id="mortality_rate" style="width: 100%;; height: 40em"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- </div> -->
                    </div>
                </div>
                <!-- <div class="row"> -->
                <div class="col-md-6">
                    <div class="portlet box grey-cascade">
                        <div class="portlet-body">
                            <div id="vmap_world" class="Charts" style="height: 44em;">
                                <div id="line_chart" style="width:100%;height:44em;margin: auto;"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>


            <!-- END PAGE CONTENT-->
        </div>
    </div>
    <!-- END CONTENT -->
</div>
<!-- END CONTAINER -->
<!-- BEGIN FOOTER -->
<div class="page-footer">
    <div class="scroll-to-top">
        <i class="icon-arrow-up"></i>
        Big data analysis-12 groups-epidemic situation data analysis
    </div>
</div>

<script type="text/javascript">
    // Chart1
    setTimeout(worldMap, 1000);
    function worldMap() {
        var days1 = [];
        var country1 = [];
        var data1 = [];
        var xmlHTTP1 = new XMLHttpRequest();

        var temp = [];
        xmlHTTP1.onreadystatechange = function (ev) {
            var myChart1 = echarts.init(document.getElementById('world_chart'));
            myChart1.showLoading({
                text: '数据正在努力加载...',
                textStyle: {fontSize: 30, color: '#444'},
                effectOption: {backgroundColor: 'rgba(0, 0, 0, 0)'}
            });
            if (xmlHTTP1.readyState == 4 && xmlHTTP1.status == 200) {
                var rep = JSON.parse(xmlHTTP1.responseText);
                for (var i = 0; i < rep.length; i++) {
                    if (days1.indexOf(rep[i].date) == -1) {
                        days1.push(rep[i].date);
                    }
                    if (country1.indexOf(rep[i].name) == -1) {
                        country1.push(rep[i].name);
                    }
                    temp.push(rep[i].value);
                    if (temp.length == 187) {
                        data1.push(temp);
                        temp = [];
                    }
                }
                myChart1.hideLoading();
                option1 = {
                    baseOption: {
                        //时间轴
                        timeline: {
                            axisType: 'category',
                            // realtime: false,
                            // loop: false,
                            autoPlay: true,
                            playInterval: 500, //0.5s滚动一次
                            // realtime = true,
                            symbolSize: 1,
                            left: '5%',
                            right: '5%',
                            bottom: '0%',
                            width: '90%',
                            // itemStyle: {
                            //     borderWidth: 0
                            // },
                            controlStyle: {
                                show: false
                            },
                            data: days1,
                            tooltip: {
                                formatter: days1
                            },
                        },

                        tooltip: {
                            show: true,
                            formatter: function (params) {
                                return params.name + '：' + params.value
                            },
                        },
                        //热力地图设置此处可设置热力地图的颜色和变化范围
                        visualMap: {
                            type: 'piecewise',
                            pieces: [{
                                min: 100001,
                                color: '#BB0000'
                            },
                                {
                                    min: 50001,
                                    max: 100000,
                                    color: '#C62B2B' // #73240D
                                },
                                {
                                    min: 25001,
                                    max: 50000,
                                    color: '#D25555'
                                },
                                {
                                    min: 1001,
                                    max: 25000,
                                    color: '#DD8080'
                                },
                                {
                                    min: 11,
                                    max: 1000,
                                    color: '#E8AAAA'
                                },
                                {
                                    min: 1,
                                    max: 10,
                                    color: '#F4D5D5'
                                },
                                {
                                    value: 0,
                                    color: 'white'
                                }
                            ],
                            orient: 'vertical',
                            itemWidth: 25,
                            itemHeight: 15,
                            showLabel: true,
                            seriesIndex: [0],

                            textStyle: {
                                color: '#7B93A7'
                            },
                            bottom: '10%',
                            left: "5%",
                        },
                        //图的相对位置
                        grid: {
                            right: '5%',
                            top: '20%',
                            bottom: '10%',
                            width: '20%'
                        },
                        //右部柱状图的显示范围
                        xAxis: {
                            'type': 'log',
                            // min: 0,
                            // max: 1000000,
                            show: false
                        },
                        yAxis: [{
                            inverse: true,
                            offset: '2',
                            'type': 'category',
                            data: '',
                            nameTextStyle: {
                                color: '#fff'
                            },
                            axisTick: {
                                show: false,
                            },
                            axisLabel: {
                                //rotate:45,
                                textStyle: {
                                    fontSize: 14,
                                    color: '#000000',
                                },
                                interval: 0
                            },
                            axisLine: {
                                show: false,
                                lineStyle: {
                                    color: '#333'
                                },
                            },
                            splitLine: {
                                show: false,
                                lineStyle: {
                                    color: '#333'
                                }
                            },
                        }],
                        geo: {
                            map: 'world',
                            right: '35%',
                            left: '5%',
                            label: {
                                emphasis: {
                                    show: false,
                                }
                            },
                            itemStyle: {
                                emphasis: {
                                    areaColor: '#90EE90'
                                }
                            }
                        },
                        series: [{
                            name: 'mapSer',
                            type: 'map',
                            map: 'world',
                            roam: false,
                            geoIndex: 0,
                            label: {
                                show: false,
                            },
                        },
                            {
                                'name': '',
                                'type': 'bar',
                                zlevel: 2,
                                barWidth: '40%',
                                label: {
                                    normal: {
                                        show: true,
                                        fontSize: 14,
                                        position: 'right',
                                        formatter: '{c}'
                                    }
                                },
                            }
                        ],

                    },
                    animationDurationUpdate: 3000,
                    animationEasingUpdate: 'quinticInOut',
                    options: []
                };
                // 从所有数据中筛选出当日最高的10个
                for (var n = 0; n < days1.length; n++) {

                    var res = [];
                    for (j = 0; j < data1[n].length; j++) {
                        res.push({
                            name: country1[j],
                            value: data1[n][j]
                        });
                    }
                    res.sort(function (a, b) {
                        return b.value - a.value;
                    }).slice(0, 6);

                    res.sort(function (a, b) {
                        return a.value - b.value;
                    });
                    var res1 = [];
                    var res2 = [];
                    for (t = 0; t < 10; t++) {
                        res1[t] = res[res.length - 1 - t].name;
                        res2[t] = res[res.length - 1 - t].value;
                    }
                    // console.log(res1);
                    // console.log("----------------");
                    // console.log(country1);
                    option1.options.push({
                        title: [{
                            text: "World Epidemic Map",
                            textStyle: {
                                color: '#2D3E53',
                                fontSize: 28
                            },
                            // left:'30%',
                            top: 20,
                            x: 'center'
                        },
                            {
                                show: true,
                                text: 'Top 10 countries and regions infected',
                                textStyle: {
                                    color: '#2D3E53',
                                    fontSize: 18
                                },
                                right: '1%',
                                top: '15%'
                            }
                        ],
                        yAxis: {
                            data: res1,
                        },
                        series: [{
                            type: 'map',
                            data: res
                        }, {
                            type: 'bar',
                            data: res2,
                            // 色彩方案1-------------------------------------------------------------------------
                            itemStyle: {
                                normal: {
                                    //这里是重点
                                    color: function (params) {
                                        //注意，如果颜色太少的话，后面颜色不会自动循环，最好多定义几个颜色
                                        var colorList = ['#BB0000', '#C21A1A', '#C93333', '#CF4D4D', '#D66666', '#DD8080', '#E49999', '#EBB3B3', '#F1CCCC', '#F8E6E6'];
                                        return colorList[params.dataIndex]
                                    }
                                }
                            }

                            // 色彩方案2-------------------------------------------------------------------------
                            // itemStyle: {
                            //     normal: {
                            //         color: function (params) {
                            //             // 设置柱状图的颜色
                            //             var colorList = [{
                            //                 colorStops: [{
                            //                     offset: 0,
                            //                     color: '#990000' // 0% 处的颜色 #FF0000
                            //                 }, {
                            //                     offset: 1,
                            //                     color: '#990000' // 100% 处的颜色 #990000
                            //                 }]
                            //             },
                            //             {
                            //                 colorStops: [{
                            //                     offset: 0,
                            //                     color: '#E9B090' // 0% 处的颜色 #00C0FA
                            //                 }, {
                            //                     offset: 1,
                            //                     color: '#E9B090' // 100% 处的颜色 #2F95FA
                            //                 }]
                            //             }
                            //             ];
                            //             if (params.dataIndex < 3) {  //前3名用colorList[0]中的颜色，后面的用colorList[1]中的颜色
                            //                 return colorList[0]
                            //             } else {
                            //                 return colorList[1]
                            //             }
                            //         },
                            //     }
                            // },
                        }]
                    });
                }

                myChart1.setOption(option1);
                window.addEventListener("resize", () => {
                    myChart1.resize();
                });
                console.log(days1);
                console.log(country1);
                console.log(data1);
            }
        }
        xmlHTTP1.open('GET', '/uv/worldData', true);
        xmlHTTP1.send();
    }

    // Chart2
    setTimeout(cureRate, 1000);

    function cureRate() {
        var name_cure = [];
        var cure_rate = [];
        var xmlHTTP2 = new XMLHttpRequest();

        xmlHTTP2.onreadystatechange = function (ev) {
            if (xmlHTTP2.readyState == 4 && xmlHTTP2.status == 200) {
                var rep = JSON.parse(xmlHTTP2.responseText);
                for (var i = 0; i < rep.length; i++) {
                    name_cure.push(rep[i].name);
                    cure_rate.push(rep[i].value);
                }
            }
            var myChart2 = echarts.init(document.getElementById('Cure_rate'));

            var option2 = {
                title: {
                    text: 'Top 10 CURE RATE',
                    subtext: 'Ranked among countries with more than 10,000 infections',
                    left: '30%'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                // legend: {
                //   data: ['治愈率', '死亡率']
                // },
                grid: {
                    left: '4%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    boundaryGap: [0, 0.01]
                },
                yAxis: {
                    type: 'category',
                    data: name_cure
                },
                series: [
                    {
                        name: '治愈率',
                        type: 'bar',
                        color: '#B8F2E6',
                        barWidth: 20,
                        data: cure_rate
                    }
                    // {
                    //   name: '死亡率',
                    //   type: 'bar',
                    //   color: '#5E6472',
                    //   data: [0.16137730066486913, 0.152467881948954, 0.1446883654750108, 0.1412415488629379, 0.1369150779896014, 0.12513673608387857, 0.11900816576350635, 0.11538461538461539, 0.11180559275175417, 0.1111111111111111]
                    // }
                ]
            };
            myChart2.setOption(option2);
            window.addEventListener("resize", () => {
                myChart2.resize();
            });
        }
        xmlHTTP2.open('GET', '/uv/worldCure', true);
        xmlHTTP2.send();
    }

    // Chart3
    setTimeout(deathRate, 1000);

    function deathRate() {
        var name_death = [];
        var death_rate = [];
        var xmlHTTP3 = new XMLHttpRequest();

        xmlHTTP3.onreadystatechange = function (ev) {
            if (xmlHTTP3.readyState == 4 && xmlHTTP3.status == 200) {
                var rep = JSON.parse(xmlHTTP3.responseText);
                for (var i = 0; i < rep.length; i++) {
                    name_death.push(rep[i].name);
                    death_rate.push(rep[i].value);
                }
            }
            var myChart3 = echarts.init(document.getElementById('mortality_rate'));

            var option3 = {
                title: {
                    text: 'TOP10 MORTALITY RATE',
                    left: '30%'
                    //subtext: '数据来自网络'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                // legend: {
                //   data: ['治愈率', '死亡率']
                // },
                grid: {
                    left: '4%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    boundaryGap: [0, 0.01]
                },
                yAxis: {
                    type: 'category',
                    data: name_death
                },
                series: [
                    // {
                    //   name: '治愈率',
                    //   type: 'bar',
                    //   color: '#B8F2E6',
                    //   data: [0.145303626037571, 0.7227436823104693, 0.6851449617527623, 0.9154929577464789, 0.3474576271186441, 0.7692307692307693, 0.3043875351623863, 0.3726225373236076, 0.9304431334888188, 0.9363038628625103, 0.5550551677550102, 0.6601941747572816, 0.6892062158756825, 0.21456208681391892, 0.8645833333333334, 0.5141848077813803, 0.27554386963876004, 0.8, 0.6163934426229508, 0.3064516129032258, 0.14673677698731827, 0.7415254237288136, 0.5, 0.5355630346724329, 0.9787234042553191, 0.5469863901490603, 0.8856502242152466, 0.6346153846153846, 0.5294117647058824, 0.4474885844748858, 0.9920634920634921, 0.0, 0.0, 0.0194672131147541, 0.8325471698113207, 0.8205747215948913, 0.9075116367436117, 0.3963935174617667, 0.5987654320987654, 0.30357142857142855, 0.12558139534883722, 0.4694408322496749, 0.5022706630336058, 0.9479768786127167, 0.8530869761153673, 0.8276923076923077, 0.0, 0.9116347569955817, 0.5727603456116417, 0.8888888888888888, 0.5850165601530065, 0.4919441944194419, 0.26911846146100793, 0.44589386302994366, 0.15313935681470137, 0.9512195121951219, 0.8636132315521629, 0.5300668151447662, 0.16254681647940075, 1.0, 0.8776896942242356, 0.37543702887897223, 0.295697372220618, 0.7857142857142857, 0.8351383874849578, 0.9157431263424589, 0.3691832400077235, 0.44494818652849744, 1.0, 0.0, 0.18303936456021494, 0.6937328453796889, 0.1101511879049676, 0.5822784810126582, 0.006089824917533621, 1.0, 0.10914069630981875, 0.591978212428819, 0.9928057553956835, 0.4947149074898751, 0.3580110497237569, 0.7918859210906104, 0.3938830584707646, 0.8993581107853237, 0.8212612418547041, 0.7255719016523956, 0.6677577741407529, 0.8863094199103974, 0.7528089887640449, 0.6194492502883506, 0.33965785381026437, 0.6945701357466063, 0.7010048791821561, 0.7700831024930748, 0.0, 0.7477148080438757, 0.6027104136947218, 0.5, 0.5024390243902439, 0.15012722646310434, 0.6707317073170732, 0.7831050228310502, 0.9649555774925962, 0.2593516209476309, 0.11434511434511435, 0.8441868801529454, 0.583502024291498, 0.5743321718931476, 0.9375, 0.17373175816539263, 0.9643916913946587, 0.725498977413528, 0.5660482893632889, 0.9393939393939394, 0.48223350253807107, 0.9722222222222222, 0.8882511420873843, 0.0, 0.5483870967741935, 0.18660598179453836, 0.0035912571463953273, 0.9853723404255319, 0.6509562841530054, 0.9014373716632443, 0.3087810911089735, 0.47540983606557374, 0.9453996282527881, 0.33191340082189036, 0.31959057594117507, 0.5906058323469278, 1.0, 0.5073170731707317, 0.4768841834739371, 0.21365046535677354, 0.485656537002234, 0.6126984126984127, 0.68376603482037, 0.7215088282504013, 0.5194280589876444, 0.6336032388663968, 1.0, 0.9473684210526315, 0.9259259259259259, 0.7178002894356006, 0.2310126582278481, 0.6896941071013006, 0.6291237654969531, 0.9388530821351843, 1.0, 0.591705069124424, 0.6927666488943053, 0.9143413367942894, 0.9133064516129032, 0.2116991643454039, 0.5677503073350635, 0.8888611180538198, 0.0, 0.619578339314482, 0.6126798082045818, 0.3384843982169391, 0.05357142857142857, 0.0, 0.9277155005798222, 0.0, 0.9729119638826185, 0.0, 0.35952848722986247, 0.95584, 0.0, 0.517175572519084, 0.9316239316239316, 0.9098436062557498, 0.8496578038535136, 0.26702883884968814, 0.23711340206185566, 0.4592338248165354, 0.6156736446591519, 0.004363859864781807, 0.911452184179457, 0.767137734655136, 0.1730632551528074, 0.9668674698795181, 0.8418891170431212, 0.6666666666666666, 0.0, 0.76, 0.1536144578313253]
                    // }
                    {
                        name: '死亡率',
                        type: 'bar',
                        color: '#5E6472',
                        barWidth: 20,
                        data: death_rate
                    }
                ]
            };

            myChart3.setOption(option3);
            window.addEventListener("resize", () => {
                myChart3.resize();
            });
        }
        xmlHTTP3.open('GET', '/uv/worldDeath', true);
        xmlHTTP3.send();
    }

    // Chart4
    setTimeout(lineChart, 1000);

    function lineChart() {
        var total_people = [];
        var death_toll = [];
        var number_of_cured = [];
        var new_daily = [];
        var date_toll = [];

        var xmlHTTP4 = new XMLHttpRequest();
        xmlHTTP4.onreadystatechange = function (ev) {
            if (xmlHTTP4.readyState == 4 && xmlHTTP4.status == 200) {
                var rep = JSON.parse(xmlHTTP4.responseText);
                for (var i = 0; i < rep.length; i++) {
                    total_people.push(rep[i].death_toll);
                    death_toll.push(rep[i].total_death);
                    number_of_cured.push(rep[i].number_of_cured);
                    new_daily.push(rep[i].new_daily);
                    date_toll.push(rep[i].date);
                }
                // 基于准备好的dom，初始化echarts实例
                var myChart4 = echarts.init(document.getElementById('line_chart'));
                //表格设定
                var word_linechart = {
                    title: {
                        text: 'World epidemic line chart',
                        left: '33%'
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        data: ['total people', 'death toll', 'Number of cured', 'New daily'],
                        left: '20%',
                        top: '10%',
                    },
                    grid: {
                        top: '25%',
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    toolbox: {
                        feature: {
                            saveAsImage: {}
                        }
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: date_toll
                    },
                    yAxis: {
                        type: 'value'
                    },
                    color: ['#BB0000', '#666666', '#03A89E', '#FF8000'],
                    series: [
                        {
                            name: 'total people',
                            type: 'line',
                            smooth: true,
                            // areaStyle: {},
                            symbol: 'none',
                            // stack: '总量',
                            data: total_people
                        },
                        {
                            name: 'death toll',
                            type: 'line',
                            smooth: true,
                            // areaStyle: {},
                            symbol: 'none',
                            // stack: '总量',
                            data: death_toll
                        },
                        {
                            name: 'Number of cured',
                            type: 'line',
                            smooth: true,
                            // areaStyle: {},
                            symbol: 'none',
                            // stack: '总量',
                            data: number_of_cured
                        },
                        {
                            name: 'New daily',
                            type: 'line',
                            smooth: true,
                            // areaStyle: {},
                            symbol: 'none',
                            // stack: '总量',
                            data: new_daily
                        }
                    ]
                };
                myChart4.setOption(word_linechart);
                window.addEventListener("resize", () => {
                    myChart4.resize();
                });
            }
        }
        xmlHTTP4.open('GET', '/uv/worldLineChart', true);
        xmlHTTP4.send();
    }
</script>

<script src="assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js"
        type="text/javascript"></script>
<script src="assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<script src="assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="assets/admin/layout4/scripts/layout.js" type="text/javascript"></script>
<script src="assets/admin/layout4/scripts/demo.js" type="text/javascript"></script>
<script>
    jQuery(document).ready(function () {
        Metronic.init(); // init metronic core components
        Layout.init(); // init current layout
        Demo.init(); // init demo features
    });
</script>
<!-- END JAVASCRIPTS -->
<script type="text/javascript" src="assets/global/scripts/canvas-nest.js"></script>
<canvas id="c_n1"></canvas>
</body>
<!-- END BODY -->

</html>